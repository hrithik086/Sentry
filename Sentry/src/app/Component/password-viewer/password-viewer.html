<div class="pw-container">
  <div class="pw-header">
    <h2>Passwords</h2>
    <p class="subtitle">Securely store and view your site credentials</p>
  </div>

  <div class="pw-grid">
    <div class="pw-card" *ngFor="let item of credentials; let i = index" (click)="toggleExpand(i)">
      <div class="card-top">
        <div class="avatar">{{ getInitials(item.siteName) }}</div>
        <div class="meta">
          <div class="site">{{ item.siteName }}</div>
          <div class="username">
            {{ item.username.length > 24 ? item.username.substring(0, 24) : item.username
            }}<span *ngIf="item.username.length > 24">…</span>
          </div>
        </div>
        <div class="chev" [class.open]="item.expanded">▸</div>
      </div>

      <div class="card-body" [class.open]="item.expanded" (click)="$event.stopPropagation()">
        <div class="row">
          <div class="label">Username</div>
          <div class="value">{{ item.username }}</div>
          <button
            class="btn small"
            (click)="copyToClipboard(item.username); $event.stopPropagation()"
          >
            Copy
          </button>
        </div>

        <div class="row">
          <div class="label">Password</div>
          <div class="value pw">{{ item.showPassword ? item.password : mask(item.password) }}</div>
          <button class="btn small" (click)="togglePassword(i); $event.stopPropagation()">
            {{ item.showPassword ? 'Hide' : 'Reveal' }}
          </button>
          <button
            class="btn small"
            (click)="copyToClipboard(item.password); $event.stopPropagation()"
          >
            Copy
          </button>
        </div>

        <div class="row small muted">Last used: {{ item.lastUsed }}</div>
      </div>
    </div>
  </div>
</div>
