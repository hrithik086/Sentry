<div class="pw-container">
  <div class="pw-header">
    <h2>Passwords</h2>
    <p class="subtitle">Securely store and view your site credentials</p>
  </div>

  <div class="pw-grid">
    @for(item of credentials(); track item.id){
      <div class="pw-card" (click)="toggleExpand(item.id)">
        <div class="card-top">
          <div class="avatar">{{ getInitials(item.domainName) }}</div>
          <div class="meta">
            <div class="site">{{ item.domainName }}</div>
            <div class="userId">
              {{ item.userId.length > 24 ? item.userId.substring(0, 24) : item.userId
              }}<span *ngIf="item.userId.length > 24">…</span>
            </div>
          </div>
          <div class="chev" [class.open]="item.expanded">▸</div>
        </div>

        <div class="card-body" [class.open]="item.expanded">
          <div class="row">
            <div class="label">userId</div>
            <div class="value">{{ item.userId }}</div>
            <button
              class="btn small"
              (click)="copyToClipboard(item.userId);"
            >
              Copy
            </button>
          </div>

          <div class="row">
            <div class="label">Password</div>
            <div class="value pw">{{ item.showPassword ? item.password : mask(item.password) }}</div>
            <button class="btn small" (click)="togglePassword(item.id);">
              {{ item.showPassword ? 'Hide' : 'Reveal' }}
            </button>
            <button
              class="btn small"
              (click)="copyToClipboard(item.password);"
            >
              Copy
            </button>
          </div>
        </div>
      </div>
    }
  </div>
</div>
